<!doctype html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>JailJS - Web Playground</title>
      <link rel="stylesheet" href="/src/app.css" />
   </head>
   <body class="min-h-screen bg-gray-50">
      <div class="max-w-4xl mx-auto p-6 space-y-6">
         <div class="bg-white rounded-lg shadow-sm p-6">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">JailJS Playground</h1>
            <p class="text-gray-600">Execute JavaScript in an isolated environment</p>
            <p class="text-sm text-amber-600 mt-2">‚ö†Ô∏è For demonstration only. Not suitable for untrusted code without additional security layers.</p>
         </div>

         <div class="bg-white rounded-lg shadow-sm p-6">
            <label for="code" class="block text-sm font-medium text-gray-700 mb-2">JavaScript Code</label>
            <textarea
               id="code"
               class="w-full h-64 font-mono text-sm border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y"
               placeholder="Enter JavaScript code..."
            >var fibonacci = function(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
};

fibonacci(10)</textarea>
            <button
               id="execute"
               class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"
            >Execute</button>
         </div>

         <div id="result" class="hidden bg-white rounded-lg shadow-sm p-6">
            <h2 class="text-sm font-medium text-gray-700 mb-2">Result</h2>
            <pre id="result-content" class="font-mono text-sm whitespace-pre-wrap break-all"></pre>
         </div>

         <div class="bg-white rounded-lg shadow-sm p-6">
            <h2 class="text-sm font-medium text-gray-700 mb-3">Examples</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
               <button class="example-btn text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-md border border-gray-200 transition-colors" data-name="fibonacci">
                  <div class="font-medium text-sm text-gray-900">Fibonacci</div>
                  <div class="text-xs text-gray-500 mt-1">Recursive function</div>
               </button>
               <button class="example-btn text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-md border border-gray-200 transition-colors" data-name="closure">
                  <div class="font-medium text-sm text-gray-900">Closure</div>
                  <div class="text-xs text-gray-500 mt-1">Counter with private state</div>
               </button>
               <button class="example-btn text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-md border border-gray-200 transition-colors" data-name="array">
                  <div class="font-medium text-sm text-gray-900">Array Methods</div>
                  <div class="text-xs text-gray-500 mt-1">Map, filter, reduce</div>
               </button>
               <button class="example-btn text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-md border border-gray-200 transition-colors" data-name="es6">
                  <div class="font-medium text-sm text-gray-900">ES6+ Transform</div>
                  <div class="text-xs text-gray-500 mt-1">Classes, arrow functions, destructuring, spread</div>
               </button>
               <button class="example-btn text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-md border border-gray-200 transition-colors" data-name="async">
                  <div class="font-medium text-sm text-gray-900">Async/Await</div>
                  <div class="text-xs text-gray-500 mt-1">Promises and async functions</div>
               </button>
               <button class="example-btn text-left px-4 py-3 bg-red-50 hover:bg-red-100 rounded-md border-2 border-red-300 transition-colors" data-name="danger">
                  <div class="font-medium text-sm text-red-900">‚ö†Ô∏è Prototype Attack</div>
                  <div class="text-xs text-red-600 mt-1">SECURITY DEMO - Shows why JailJS is NOT safe for LLM code</div>
               </button>
            </div>
         </div>

         <div id="attack-demo" class="hidden bg-red-50 rounded-lg shadow-sm p-6 border-2 border-red-300">
            <h2 class="text-sm font-medium text-red-900 mb-2">üö® Attack Demonstration</h2>
            <p class="text-sm text-red-700 mb-4">The sandboxed code polluted Array.prototype. Now watch what happens when <strong>this app's own code</strong> (outside the sandbox) tries to use arrays:</p>
            <button
               id="test-attack"
               class="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"
            >Test Attack: Run App's Own Code</button>
            <p class="text-xs text-red-600 mt-3">This demonstrates why you MUST use SandboxJS or isolated workers for LLM/untrusted code!</p>
         </div>
      </div>

      <script type="module" src="/src/main.ts"></script>
   </body>
</html>
